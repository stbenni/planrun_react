---
description: Правила работы с React frontend (экраны, компоненты, API)
globs: src/**/*.jsx
alwaysApply: false
---

# Frontend PlanRun (React)

- **API:** все запросы к бэкенду через `src/api/ApiClient.js`. Не создавать fetch/axios напрямую; использовать методы ApiClient (getDay, addTrainingDayByDate, updateTrainingDay, deleteTrainingDay, getPlan, saveResult и т.д.). Для операций с планом/днями нужен csrf_token — ApiClient получает его через get_csrf_token для update/delete.
- **Состояние:** Zustand stores — useAuthStore, usePlanStore, useWorkoutStore. Глобальное состояние держать в stores; локальное — в useState/useReducer в компонентах.
- **Календарь и тренировки:** экран `CalendarScreen.jsx`; компоненты `WeekCalendar.jsx`, `MonthlyCalendar.jsx`, `DayModal.jsx`, `AddTrainingModal.jsx`, `WorkoutCard.jsx`, `ResultModal.jsx`. Добавление/редактирование/удаление дня плана — через ApiClient; после изменений обновлять данные дня (getDay) и при необходимости план (getPlan с silent).
- **Даты:** передавать в API в формате Y-m-d (например `date.toISOString().slice(0, 10)`).
- **Стили:** компонентные CSS рядом с компонентом (например AddTrainingModal.css). Общие переменные — `src/styles/variables.css`, тёмная тема — `dark-mode.css`.
