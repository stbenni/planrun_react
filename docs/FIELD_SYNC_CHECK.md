# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–π –ø—Ä–æ—Ñ–∏–ª—è

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 4 —Ñ–µ–≤—Ä–∞–ª—è 2026

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤ getUserData()
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤ SettingsScreen, –Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –∏–∑ –ë–î.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è –≤ `user_functions.php`:
- `preferred_ofp_days` - –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ –¥–Ω–∏ –¥–ª—è –û–§–ü
- `last_race_distance` - –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–±–µ–≥–∞
- `last_race_distance_km` - –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–±–µ–≥–∞ –≤ –∫–º (–¥–ª—è "other")
- `is_first_race_at_distance` - –ø–µ—Ä–≤—ã–π –∑–∞–±–µ–≥ –Ω–∞ —ç—Ç—É –¥–∏—Å—Ç–∞–Ω—Ü–∏—é
- `health_notes` - –∑–∞–º–µ—Ç–∫–∏ –æ –∑–¥–æ—Ä–æ–≤—å–µ
- `device_type` - —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `avatar_path` - –ø—É—Ç—å –∫ –∞–≤–∞—Ç–∞—Ä—É
- `privacy_level` - —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤ updateProfile()
**–ü—Ä–æ–±–ª–µ–º–∞:** `avatar_path` –∏ `privacy_level` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç—Ç–∏—Ö –ø–æ–ª–µ–π –≤ `UserController::updateProfile()`.

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤ handleSave()
**–ü—Ä–æ–±–ª–µ–º–∞:** `avatar_path` –∏ `privacy_level` –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω—ã —ç—Ç–∏ –ø–æ–ª—è –≤ `dataToSend` –≤ `SettingsScreen.jsx`.

## üìä –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π

### –ü–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è (–±–∞–∑–æ–≤—ã–µ)
- ‚úÖ `username` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `email` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `gender` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `birth_year` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `height_cm` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `weight_kg` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `timezone` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `avatar_path` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `privacy_level` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### –ü–æ–ª—è —Ü–µ–ª–µ–π
- ‚úÖ `goal_type` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `race_distance` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `race_date` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `race_target_time` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `target_marathon_date` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `target_marathon_time` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `weight_goal_kg` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `weight_goal_date` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### –ü–æ–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- ‚úÖ `experience_level` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `weekly_base_km` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `sessions_per_week` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `preferred_days` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (JSON), –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `preferred_ofp_days` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (JSON), –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `has_treadmill` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `training_time_pref` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `ofp_preference` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `training_mode` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### –ü–æ–ª—è –∑–¥–æ—Ä–æ–≤—å—è
- ‚úÖ `health_notes` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `device_type` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `health_program` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `health_plan_weeks` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `current_running_level` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `running_experience` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `easy_pace_sec` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `is_first_race_at_distance` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `last_race_distance` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `last_race_distance_km` - **–ò–°–ü–†–ê–í–õ–ï–ù–û:** —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `last_race_time` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `last_race_date` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### –ü–æ–ª—è —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `telegram_id` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è), –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (–Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
–ë–î (users table)
    ‚Üì
getUserData() (user_functions.php)
    ‚Üì
UserController::getProfile()
    ‚Üì
SettingsScreen::loadProfile()
    ‚Üì
formData (React state)
    ‚Üì
SettingsScreen::handleSave()
    ‚Üì
UserController::updateProfile()
    ‚Üì
–ë–î (users table)
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–í—Å–µ –ø–æ–ª—è —Ç–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É:
1. ‚úÖ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ users)
2. ‚úÖ getUserData() - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î
3. ‚úÖ UserController::getProfile() - API –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
4. ‚úÖ SettingsScreen::loadProfile() - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
5. ‚úÖ SettingsScreen::handleSave() - –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
6. ‚úÖ UserController::updateProfile() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- JSON –ø–æ–ª—è (`preferred_days`, `preferred_ofp_days`) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å—è—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –í—Å–µ NULL –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `normalizeValue()`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `UserController::updateProfile()`
- CSRF —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í—Å–µ –ø–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç!**
