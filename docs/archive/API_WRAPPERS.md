# üîß API –û–±–µ—Ä—Ç–∫–∏ –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

**–í–ê–ñ–ù–û: –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (`login.php`, `api.php`, `auth.php`) –ù–ï –∏–∑–º–µ–Ω—è—é—Ç—Å—è!**

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–Ω—ã –æ–±–µ—Ä—Ç–∫–∏ –≤ `react/web/api/`:
- `login_api.php` - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –ª–æ–≥–∏–Ω–∞ —Å CORS –∏ AJAX –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- `api_wrapper.php` - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è `api.php` —Å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
/var/www/planrun/
‚îú‚îÄ‚îÄ login.php          # –û—Ä–∏–≥–∏–Ω–∞–ª (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ api.php            # –û—Ä–∏–≥–∏–Ω–∞–ª (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ auth.php           # –û—Ä–∏–≥–∏–Ω–∞–ª (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è)
‚îî‚îÄ‚îÄ react/web/api/
    ‚îú‚îÄ‚îÄ login_api.php  # –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –ª–æ–≥–∏–Ω–∞
    ‚îî‚îÄ‚îÄ api_wrapper.php # –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è API
```

## –ß—Ç–æ –¥–µ–ª–∞—é—Ç –æ–±–µ—Ä—Ç–∫–∏

### `login_api.php`
- –î–æ–±–∞–≤–ª—è–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é —Å `SameSite=None` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å cookies
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç AJAX –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `auth.php`

### `api_wrapper.php`
- –î–æ–±–∞–≤–ª—è–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –¥–ª—è cross-origin
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `api.php` –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ React

`ApiClient.js` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–µ—Ä—Ç–æ–∫:
- `baseUrl = 'https://planrun.ru/react/web/api'`
- –ó–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ `login_api.php` –∏ `api_wrapper.php`

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è
2. ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
3. ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å –æ–±–µ—Ä—Ç–∫–∏)
4. ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
