# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å cookies –∏ —Å–µ—Å—Å–∏—è–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞
403 Forbidden –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ `api.php?action=load` –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞.

## –ü—Ä–∏—á–∏–Ω–∞
Cookies –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –∏–∑-–∑–∞ –ø–æ–ª–∏—Ç–∏–∫–∏ SameSite –∏ —Ä–∞–∑–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (http://192.168.0.5:3000 vs https://planrun.ru).

## –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω `auth.php`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–∏ –¥–ª—è cross-origin –∑–∞–ø—Ä–æ—Å–æ–≤:
  - `session.cookie_samesite = 'None'` - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É cookies –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏
  - `session.cookie_secure = '1'` - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è SameSite=None —Å HTTPS
  - `session.cookie_httponly = '1'` - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `api.php`
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ CORS - —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Å planrun.ru, localhost –∏ 192.168.x.x

### 3. –û–±–Ω–æ–≤–ª–µ–Ω `ApiClient.js`
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 403 –∏ 401
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON –æ—Ç–≤–µ—Ç–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab:
   - –ó–∞–ø—Ä–æ—Å –∫ `login.php` –¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å cookie `PHPSESSID` —Å `SameSite=None; Secure`
   - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `api.php` –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç cookie
   - –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200 OK, –∞ –Ω–µ 403

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ 403:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Application ‚Üí Cookies):
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `PHPSESSID` –¥–ª—è `planrun.ru`
   - –î–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `SameSite=None` –∏ `Secure`

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab:
   - –í –∑–∞–ø—Ä–æ—Å–µ –∫ `api.php` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Cookie: PHPSESSID=...`
   - –ï—Å–ª–∏ –Ω–µ—Ç - cookies –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ CORS
