# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ª–µ–Ω–¥–∏–Ω–≥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üéâ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ **`planrun-backend/register_api.php`** (22KB) - –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ register.php
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ AJAX
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º INSERT
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ (AI/self —Ä–µ–∂–∏–º—ã)
  - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ –ë–î `sv`

- ‚úÖ **`api/register_api.php`** (1.3KB) - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - –°–µ—Å—Å–∏—è –¥–ª—è cross-origin

### 2. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ **`src/screens/LandingScreen.jsx`** (6.6KB)
  - –ü–æ–ª–Ω—ã–π –ª–µ–Ω–¥–∏–Ω–≥ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
  - –ö–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞
  - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

- ‚úÖ **`src/screens/RegisterScreen.jsx`** (46KB) - –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è
  - **–®–∞–≥ 0:** –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (AI/Self/Coach)
  - **–®–∞–≥ 1:** –ê–∫–∫–∞—É–Ω—Ç (username, password, email)
  - **–®–∞–≥ 2:** –¶–µ–ª—å —Å —É—Å–ª–æ–≤–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:
    - Health: –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
    - Race/Time improvement: –¥–∏—Å—Ç–∞–Ω—Ü–∏—è, –¥–∞—Ç–∞, –≤—Ä–µ–º—è
    - Weight loss: —Ü–µ–ª–µ–≤–æ–π –≤–µ—Å, –¥–∞—Ç–∞
  - **–®–∞–≥ 3:** –ü—Ä–æ—Ñ–∏–ª—å:
    - –ë–∞–∑–æ–≤—ã–π: gender, birth_year, height, weight, experience
    - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π (–¥–ª—è race/time_improvement): —Å—Ç–∞–∂, —Ç–µ–º–ø, –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–±–µ–≥
    - –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: –¥–Ω–∏ –±–µ–≥–∞, –û–§–ü, –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  - –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞ –ø–æ–ª–µ–π
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
  - –ü—Ä–æ–ø—É—Å–∫ —à–∞–≥–∞ 2 –¥–ª—è —Ä–µ–∂–∏–º–∞ 'self'

- ‚úÖ **`src/screens/RegisterScreen.css`** - –æ–±–Ω–æ–≤–ª–µ–Ω
  - –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
  - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö

### 3. API –∫–ª–∏–µ–Ω—Ç
- ‚úÖ **`src/api/ApiClient.js`** - –æ–±–Ω–æ–≤–ª–µ–Ω
  - –ú–µ—Ç–æ–¥ `register(userData)` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - –ú–µ—Ç–æ–¥ `validateField(field, value)` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π

### 4. –†–æ—É—Ç–∏–Ω–≥
- ‚úÖ **`src/App.jsx`** - –æ–±–Ω–æ–≤–ª–µ–Ω
  - –†–æ—É—Ç `/landing` - –ª–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  - –†–æ—É—Ç `/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç `/` —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `/landing` –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
  - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleRegister()` –¥–ª—è –∞–≤—Ç–æ–ª–æ–≥–∏–Ω–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- `username` (3-50 —Å–∏–º–≤–æ–ª–æ–≤)
- `password` (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)
- `gender` (male/female) - –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ –∫—Ä–æ–º–µ 'self'
- `goal_type` (health/race/weight_loss/time_improvement)
- `training_mode` (ai/self/coach/both)
- `experience_level` (beginner/intermediate/advanced)

### –£—Å–ª–æ–≤–Ω—ã–µ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ü–µ–ª–∏):
- **Race/Time improvement:**
  - `race_date`, `race_distance`, `race_target_time`
  - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: `running_experience`, `easy_pace_min/sec`, `is_first_race`, `last_race_*`

- **Weight loss:**
  - `weight_goal_kg`, `weight_goal_date`

- **Health:**
  - `health_program`, `health_plan_weeks`, `current_running_level`

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
- `email`, `birth_year`, `height_cm`, `weight_kg`
- `weekly_base_km`, `sessions_per_week`
- `preferred_days[]`, `preferred_ofp_days[]`
- `ofp_preference`, `training_time_pref`, `has_treadmill`
- `health_notes`, `device_type`
- `training_start_date`

## üîß –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ë–î sv

- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `db_config.php` —Å `DB_NAME = 'sv'`
- ‚úÖ –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –∏–º–µ–Ω–∏ –ë–î –≤ –∫–æ–¥–µ
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π INSERT —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –ø–æ–ª–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `user_training_plans` –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞:

1. **–†–µ–∂–∏–º 'self':**
   - –°–æ–∑–¥–∞–µ—Ç –ø—É—Å—Ç–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —á–µ—Ä–µ–∑ `create_empty_plan.php`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤—Ä—É—á–Ω—É—é

2. **–†–µ–∂–∏–º 'ai' –∏–ª–∏ 'both':**
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ `generate_plan_async.php`
   - –ü–ª–∞–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ (3-5 –º–∏–Ω—É—Ç)
   - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/var/www/s-vladimirov.ru/
‚îú‚îÄ‚îÄ planrun-backend/
‚îÇ   ‚îî‚îÄ‚îÄ register_api.php          ‚úÖ –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è (22KB)
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ register_api.php          ‚úÖ –û–±–µ—Ä—Ç–∫–∞ (1.3KB)
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ screens/
    ‚îÇ   ‚îú‚îÄ‚îÄ LandingScreen.jsx      ‚úÖ –õ–µ–Ω–¥–∏–Ω–≥ (6.6KB)
    ‚îÇ   ‚îú‚îÄ‚îÄ LandingScreen.css      ‚úÖ –°—Ç–∏–ª–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ RegisterScreen.jsx     ‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (46KB)
    ‚îÇ   ‚îî‚îÄ‚îÄ RegisterScreen.css     ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏
    ‚îú‚îÄ‚îÄ api/
    ‚îÇ   ‚îî‚îÄ‚îÄ ApiClient.js           ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω (register, validateField)
    ‚îî‚îÄ‚îÄ App.jsx                    ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω (—Ä–æ—É—Ç—ã /landing, /register)
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:3200/landing`
3. –ù–∞–∂–º–∏—Ç–µ "üöÄ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å AI‚Äë–ø–ª–∞–Ω"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î `sv`
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
curl -X POST http://localhost/api/register_api.php \
  -H "Content-Type: application/json" \
  -d '{
    "username":"testuser",
    "password":"test123",
    "goal_type":"health",
    "gender":"male",
    "training_mode":"ai",
    "experience_level":"beginner"
  }'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î:
```sql
SELECT * FROM sv.users WHERE username = 'testuser';
SELECT * FROM sv.user_training_plans WHERE user_id = (SELECT id FROM sv.users WHERE username = 'testuser');
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –ø–æ–ª—è –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ `register.php` –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã
- –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞ –ø–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ –ë–î `sv`

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ü–û–õ–ù–ê–Ø –ú–ò–ì–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê**
