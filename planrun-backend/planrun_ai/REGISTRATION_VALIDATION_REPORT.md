# üìã –û—Ç—á–µ—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

## ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

### –®–∞–≥ 0: –†–µ–∂–∏–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- ‚úÖ `training_mode` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'ai')

### –®–∞–≥ 1: –ê–∫–∫–∞—É–Ω—Ç (–¥–ª—è —Ä–µ–∂–∏–º–∞ 'ai'/'both')
- ‚úÖ `username` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–º–∏–Ω. 3 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ `password` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚ö†Ô∏è `email` - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

### –®–∞–≥ 2: –¶–µ–ª—å (–¥–ª—è —Ä–µ–∂–∏–º–∞ 'ai'/'both')

**–û–±—â–∏–µ:**
- ‚úÖ `goal_type` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'health')
- ‚úÖ `training_start_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

**–î–ª—è goal_type = 'race' –∏–ª–∏ 'time_improvement':**
- ‚úÖ `race_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

**–î–ª—è goal_type = 'weight_loss':**
- ‚úÖ `weight_goal_kg` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- ‚úÖ `weight_goal_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

**–î–ª—è goal_type = 'health':**
- ‚úÖ `health_program` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- ‚úÖ `current_running_level` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- ‚úÖ `health_plan_weeks` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–µ—Å–ª–∏ health_program = 'custom')

### –®–∞–≥ 3: –ü—Ä–æ—Ñ–∏–ª—å

**–î–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤:**
- ‚úÖ `gender` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

**–î–ª—è —Ä–µ–∂–∏–º–∞ 'ai'/'both' (–Ω–µ 'self'):**
- ‚úÖ `experience_level` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'beginner')

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞

**register_api.php –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ:**
- ‚úÖ `username` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- ‚úÖ `password` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ `gender` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–∫—Ä–æ–º–µ —Ä–µ–∂–∏–º–∞ 'self')

**–ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
- ‚ùå `goal_type` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚ùå `training_start_date` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚ùå `race_date` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è goal_type='race'
- ‚ùå `weight_goal_kg` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è goal_type='weight_loss'
- ‚ùå `weight_goal_date` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è goal_type='weight_loss'
- ‚ùå `health_program` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è goal_type='health'
- ‚ùå `current_running_level` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è goal_type='health'
- ‚ùå `experience_level` - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —Ä–µ–∂–∏–º–∞ 'ai'/'both'

### 2. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –≤ PlanRun AI

**plan_generator.php –ø–æ–ª—É—á–∞–µ—Ç –∏–∑ –ë–î:**
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users`
- ‚úÖ –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç JSON –ø–æ–ª—è (`preferred_days`, `preferred_ofp_days`)

**prompt_builder.php –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Ü–µ–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `goal_type`
- ‚úÖ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è (–¥–Ω–∏, –≤—Ä–µ–º—è, –û–§–ü)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –∑–¥–æ—Ä–æ–≤—å—é

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å NULL –≤ –ë–î, –∏ –ø—Ä–æ–º–ø—Ç –±—É–¥–µ—Ç –Ω–µ–ø–æ–ª–Ω—ã–º.

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### 1. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `register_api.php` –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î:

```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ –∏ —Ü–µ–ª–∏
if ($trainingMode !== 'self') {
    if (empty($goalType)) {
        echo json_encode(['success' => false, 'error' => '–¢–∏–ø —Ü–µ–ª–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω'], JSON_UNESCAPED_UNICODE);
        exit;
    }
    
    if (empty($trainingStartDate)) {
        echo json_encode(['success' => false, 'error' => '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞'], JSON_UNESCAPED_UNICODE);
        exit;
    }
    
    if ($goalType === 'race' || $goalType === 'time_improvement') {
        if (empty($raceDate)) {
            echo json_encode(['success' => false, 'error' => '–î–∞—Ç–∞ –∑–∞–±–µ–≥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞'], JSON_UNESCAPED_UNICODE);
            exit;
        }
    }
    
    if ($goalType === 'weight_loss') {
        if (empty($weightGoalKg) || empty($weightGoalDate)) {
            echo json_encode(['success' => false, 'error' => '–¶–µ–ª–µ–≤–æ–π –≤–µ—Å –∏ –¥–∞—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã'], JSON_UNESCAPED_UNICODE);
            exit;
        }
    }
    
    if ($goalType === 'health') {
        if (empty($healthProgram) || empty($currentRunningLevel)) {
            echo json_encode(['success' => false, 'error' => '–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∏ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã'], JSON_UNESCAPED_UNICODE);
            exit;
        }
        if ($healthProgram === 'custom' && empty($healthPlanWeeks)) {
            echo json_encode(['success' => false, 'error' => '–°—Ä–æ–∫ –ø–ª–∞–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Å–≤–æ–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã'], JSON_UNESCAPED_UNICODE);
            exit;
        }
    }
    
    if (empty($experienceLevel)) {
        $experienceLevel = 'beginner'; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    }
}
```

### 2. –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω–µ–ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–í `prompt_builder.php` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ–ª–Ω—ã–µ.

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–µ–π

–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –∏–∑ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –ë–î –∏ –∑–∞—Ç–µ–º –≤ –ø—Ä–æ–º–ø—Ç.
