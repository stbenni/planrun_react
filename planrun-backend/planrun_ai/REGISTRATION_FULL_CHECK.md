# ‚úÖ –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

## üìã –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

### –®–∞–≥ 0: –†–µ–∂–∏–º
- ‚úÖ `training_mode` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'ai')

### –®–∞–≥ 1: –ê–∫–∫–∞—É–Ω—Ç (–¥–ª—è 'ai'/'both')
- ‚úÖ `username` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–º–∏–Ω. 3 —Å–∏–º–≤–æ–ª–∞)
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ `password` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚ö†Ô∏è `email` - –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)

### –®–∞–≥ 2: –¶–µ–ª—å (–¥–ª—è 'ai'/'both')
- ‚úÖ `goal_type` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
  - ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 'health'
- ‚úÖ `training_start_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

**–î–ª—è goal_type = 'race' –∏–ª–∏ 'time_improvement':**
- ‚úÖ `race_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

**–î–ª—è goal_type = 'weight_loss':**
- ‚úÖ `weight_goal_kg` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ `weight_goal_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

**–î–ª—è goal_type = 'health':**
- ‚úÖ `health_program` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ `current_running_level` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ `health_plan_weeks` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–µ—Å–ª–∏ health_program = 'custom')
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

### –®–∞–≥ 3: –ü—Ä–æ—Ñ–∏–ª—å
- ‚úÖ `gender` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  - ‚ö†Ô∏è –î–ª—è —Ä–µ–∂–∏–º–∞ 'self' —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è 'male' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ `experience_level` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–¥–ª—è 'ai'/'both')
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'beginner')

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –§–æ—Ä–º–∞ ‚Üí API (RegisterScreen.jsx ‚Üí register_api.php)

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
```javascript
{
  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
  training_mode, username, password, goal_type, training_start_date,
  gender, experience_level,
  
  // –£—Å–ª–æ–≤–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (–∑–∞–≤–∏—Å—è—Ç –æ—Ç goal_type)
  race_date, weight_goal_kg, weight_goal_date,
  health_program, current_running_level, health_plan_weeks,
  
  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
  email, birth_year, height_cm, weight_kg, weekly_base_km,
  sessions_per_week, preferred_days[], preferred_ofp_days[],
  ofp_preference, training_time_pref, has_treadmill,
  health_notes, device_type,
  race_distance, race_target_time,
  running_experience, easy_pace_min, easy_pace_sec,
  is_first_race, last_race_distance, last_race_distance_km,
  last_race_time, last_race_date
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
- ‚úÖ username, password - –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
- ‚úÖ gender - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è (–∫—Ä–æ–º–µ 'self')
- ‚úÖ goal_type, training_start_date - –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–µ –ø–æ–ª—è - –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç goal_type (–¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ experience_level - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è 'beginner' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–æ–±–∞–≤–ª–µ–Ω–æ)

### 2. API ‚Üí –ë–î (register_api.php)

**–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∏–∑ —Ñ–æ—Ä–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `users`
- ‚úÖ JSON –ø–æ–ª—è –∫–æ–¥–∏—Ä—É—é—Ç—Å—è: `preferred_days`, `preferred_ofp_days`
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:
  - `is_first_race` ‚Üí `is_first_race_at_distance` (0/1)
  - `easy_pace_min/sec` ‚Üí `easy_pace_sec` (—Å–µ–∫—É–Ω–¥—ã)
  - `last_race_date` (month) ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è '-01'

### 3. –ë–î ‚Üí –ü—Ä–æ–º–ø—Ç (plan_generator.php ‚Üí prompt_builder.php)

**–ü–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –ë–î:**
- ‚úÖ –í—Å–µ –ø–æ–ª—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users`
- ‚úÖ –î–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è JSON: `preferred_days`, `preferred_ofp_days`

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç–µ:**
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: gender, birth_year (–∫–∞–∫ –≤–æ–∑—Ä–∞—Å—Ç), height_cm, weight_kg
- ‚úÖ –û–ø—ã—Ç: experience_level, weekly_base_km, sessions_per_week
- ‚úÖ –¶–µ–ª—å: goal_type + —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: preferred_days, preferred_ofp_days, training_time_pref, ofp_preference, has_treadmill
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: health_notes
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: running_experience, easy_pace_sec, is_first_race_at_distance, last_race_*

### 4. –ü—Ä–æ–º–ø—Ç ‚Üí PlanRun AI

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
```json
{
  "user_data": { –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è },
  "goal_type": "health|race|weight_loss|time_improvement",
  "include_knowledge": true,
  "temperature": 0.3,
  "max_tokens": 16384,
  "base_prompt": "–ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
}
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–í `register_api.php` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:
- ‚úÖ `goal_type` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–µ–∂–∏–º–∞ 'ai'/'both'
- ‚úÖ `training_start_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- ‚úÖ `race_date` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è goal_type='race'/'time_improvement'
- ‚úÖ `weight_goal_kg` –∏ `weight_goal_date` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è goal_type='weight_loss'
- ‚úÖ `health_program` –∏ `current_running_level` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è goal_type='health'
- ‚úÖ `health_plan_weeks` - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è health_program='custom'
- ‚úÖ `experience_level` - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è 'beginner' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üìä –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–µ–π

| –ü–æ–ª–µ —Ñ–æ—Ä–º—ã | –ë–î –ø–æ–ª–µ | –í –ø—Ä–æ–º–ø—Ç–µ | –°—Ç–∞—Ç—É—Å |
|------------|---------|-----------|--------|
| training_mode | training_mode | ‚ùå | ‚úÖ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞) |
| username | username | ‚ùå | ‚úÖ |
| password | password | ‚ùå | ‚úÖ |
| email | email | ‚ùå | ‚úÖ |
| goal_type | goal_type | ‚úÖ | ‚úÖ |
| race_date | race_date | ‚úÖ | ‚úÖ |
| race_distance | race_distance | ‚úÖ | ‚úÖ |
| race_target_time | race_target_time | ‚úÖ | ‚úÖ |
| weight_goal_kg | weight_goal_kg | ‚úÖ | ‚úÖ |
| weight_goal_date | weight_goal_date | ‚úÖ | ‚úÖ |
| health_program | health_program | ‚úÖ | ‚úÖ |
| health_plan_weeks | health_plan_weeks | ‚úÖ | ‚úÖ |
| current_running_level | current_running_level | ‚úÖ | ‚úÖ |
| training_start_date | training_start_date | ‚úÖ | ‚úÖ |
| gender | gender | ‚úÖ | ‚úÖ |
| birth_year | birth_year | ‚úÖ (–∫–∞–∫ –≤–æ–∑—Ä–∞—Å—Ç) | ‚úÖ |
| height_cm | height_cm | ‚úÖ | ‚úÖ |
| weight_kg | weight_kg | ‚úÖ | ‚úÖ |
| experience_level | experience_level | ‚úÖ | ‚úÖ |
| weekly_base_km | weekly_base_km | ‚úÖ | ‚úÖ |
| sessions_per_week | sessions_per_week | ‚úÖ | ‚úÖ |
| preferred_days | preferred_days (JSON) | ‚úÖ | ‚úÖ |
| preferred_ofp_days | preferred_ofp_days (JSON) | ‚úÖ | ‚úÖ |
| ofp_preference | ofp_preference | ‚úÖ | ‚úÖ |
| training_time_pref | training_time_pref | ‚úÖ | ‚úÖ |
| has_treadmill | has_treadmill | ‚úÖ | ‚úÖ |
| health_notes | health_notes | ‚úÖ | ‚úÖ |
| running_experience | running_experience | ‚úÖ | ‚úÖ |
| easy_pace_min/sec | easy_pace_sec | ‚úÖ | ‚úÖ |
| is_first_race | is_first_race_at_distance | ‚úÖ | ‚úÖ |
| last_race_* | last_race_* | ‚úÖ | ‚úÖ |

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:** ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î:** ‚úÖ –í—Å–µ –ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–ü–µ—Ä–µ–¥–∞—á–∞ –≤ –ø—Ä–æ–º–ø—Ç:** ‚úÖ –í—Å–µ –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
5. **–ü—Ä–æ–º–ø—Ç –¥–ª—è AI:** ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ü–µ–ª—å

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞!** üéâ
